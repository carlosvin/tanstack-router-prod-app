var E=t=>{throw TypeError(t)};var C=(t,e,i)=>e.has(t)||E("Cannot "+i);var a=(t,e,i)=>(C(t,e,"read from private field"),i?i.call(t):e.get(t)),g=(t,e,i)=>e.has(t)?E("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,i),l=(t,e,i,s)=>(C(t,e,"write to private field"),s?s.call(t,i):e.set(t,i),i);import{j as o,L as v,S as k,R as y,O as A}from"./index-BA3o2gLN.js";import{A as D}from"./Authors-BlSIXPzf.js";function L({title:t,authors:e,id:i}){return o.jsxs("span",{className:"container-fluid grid",children:[o.jsx(v,{to:"/books/$bookId",params:{bookId:i.toString()},children:t}),o.jsx("small",{children:o.jsx(D,{authors:e})})]})}function p(t,e,i,s){const n=e<1||e>s||e===i;return{text:t,page:e,isDisabled:n}}function _({totalItems:t,currentPage:e,perPage:i}){const s=Math.max(1,Math.ceil(t/i)),n=Math.min(Math.max(1,e),s);return[p("<<",1,n,s),p("<",Math.max(n-1,1),n,s),p("",n,n,s),p(">",Math.min(n+1,s),n,s),p(">>",s,n,s)]}function I({totalItems:t,currentPage:e,perPage:i,onPageChange:s}){return o.jsx("div",{role:"group",children:_({totalItems:t,currentPage:e,perPage:i}).map(({page:n,text:r,isDisabled:c})=>o.jsxs("button",{onClick:()=>s(n),disabled:c,type:"button",className:"outline",children:[r," ",o.jsxs("small",{children:["(",n,")"]})]},`paginator-${r}-${n}`))})}function M(t){return typeof t=="function"}function P(t,...e){return M(t)?t(...e):t}function w(t){return t||(typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():"")}class O{on(e,i){}onAll(e){}onAllPluginEvents(e){}emit(e,...i){}getPluginId(){}}const N=O;class T extends N{constructor(e){super({pluginId:"pacer",debug:e==null?void 0:e.debug})}}const U=(t,e)=>{S.emit(t,e)},S=new T;function j(){return{canLeadingExecute:!0,executionCount:0,isPending:!1,lastArgs:void 0,status:"idle",maybeExecuteCount:0}}const F={enabled:!0,leading:!1,trailing:!0,wait:0};var h,u,d,x,f,m;class R{constructor(e,i){g(this,h);g(this,u);g(this,d);g(this,x);g(this,f);g(this,m);this.fn=e,this.store=new k(j()),this.setOptions=s=>{this.options={...this.options,...s},a(this,d).call(this)||this.cancel()},l(this,u,s=>{this.store.setState(n=>{const r={...n,...s},{isPending:c}=r;return{...r,status:a(this,d).call(this)?c?"pending":"idle":"disabled"}}),U("Debouncer",this)}),l(this,d,()=>!!P(this.options.enabled,this)),l(this,x,()=>P(this.options.wait,this)),this.maybeExecute=(...s)=>{if(!a(this,d).call(this))return;a(this,u).call(this,{maybeExecuteCount:this.store.state.maybeExecuteCount+1});let n=!1;this.options.leading&&this.store.state.canLeadingExecute&&(a(this,u).call(this,{canLeadingExecute:!1}),n=!0,a(this,f).call(this,...s)),this.options.trailing&&a(this,u).call(this,{isPending:!0,lastArgs:s}),a(this,h)&&clearTimeout(a(this,h)),l(this,h,setTimeout(()=>{a(this,u).call(this,{canLeadingExecute:!0}),this.options.trailing&&!n&&a(this,f).call(this,...s)},a(this,x).call(this)))},l(this,f,(...s)=>{var n,r;a(this,d).call(this)&&(this.fn(...s),a(this,u).call(this,{executionCount:this.store.state.executionCount+1,isPending:!1,lastArgs:void 0}),(r=(n=this.options).onExecute)==null||r.call(n,s,this))}),this.flush=()=>{this.store.state.isPending&&this.store.state.lastArgs&&(a(this,m).call(this),a(this,f).call(this,...this.store.state.lastArgs))},l(this,m,()=>{a(this,h)&&(clearTimeout(a(this,h)),l(this,h,void 0))}),this.cancel=()=>{a(this,m).call(this),a(this,u).call(this,{canLeadingExecute:!0,isPending:!1})},this.reset=()=>{a(this,u).call(this,j())},this.key=w(i.key),this.options={...F,...i},a(this,u).call(this,this.options.initialState??{}),S.on("d-Debouncer",s=>{s.payload.key===this.key&&(a(this,u).call(this,s.payload.store.state),this.setOptions(s.payload.options))})}}h=new WeakMap,u=new WeakMap,d=new WeakMap,x=new WeakMap,f=new WeakMap,m=new WeakMap;function $(t,e){return new R(t,e).maybeExecute}function B({defaultValue:t,onChange:e}){const i=$(n=>e(n),{wait:500});function s(n){const r=n.target.value;i(r.length>0?r:void 0)}return o.jsx("input",{name:"search",type:"search",placeholder:"Search books",onChange:s,defaultValue:t})}function q(){const{results:t,count:e}=y.useLoaderData(),{search:i,page:s}=y.useSearch(),n=y.useNavigate();function r(c){n({search:b=>({...b,page:c})})}return o.jsxs(o.Fragment,{children:[o.jsx(B,{onChange:c=>n({search:b=>({...b,search:c,page:1})}),defaultValue:i}),o.jsx("ol",{children:t.map(c=>o.jsx("li",{children:o.jsx(L,{...c})},c.id))}),o.jsx(A,{}),o.jsx(I,{totalItems:e,currentPage:s||1,perPage:32,onPageChange:r})]})}export{q as component};
//# sourceMappingURL=books-Co_14twq.js.map
